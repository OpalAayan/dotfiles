######################################################################################
# AUTOGENERATED HYPR CONFIG.
# PLEASE DBUS-UPDATE-ACTIVATION-ENVIRONMENT --SYSTEMD WAYLAND_DISPLAY XDG_CURRENT_DESKTOP #
#######################################################################################

#*================================================================*#
#                           ENVIRONMENT                            #
#*================================================================*#

# --- Cursor Configuration ---
# Setting these as 'env' ensures they load BEFORE Hyprland draws the screen
env = HYPRCURSOR_THEME,Bibata-Original-Ice
env = HYPRCURSOR_SIZE,24
env = XCURSOR_THEME,Bibata-Original-Ice
env = XCURSOR_SIZE,24

# --- Other Environment Variables ---
env = QT_QPA_PLATFORMTHEME,qt5ct
env = XDG_CURRENT_DESKTOP,Hyprland

#*================================================================*#
#                           MONITORS                               #
#*================================================================*#

# See https://wiki.hyprland.org/Configuring/Monitors/
monitor=,preferred,auto,1


#*================================================================*#
#                           AUTOSTART                              #
#*================================================================*#

# See https://wiki.hyprland.org/Configuring/Keywords/

# --- System Services ---
# 1. Update environment variables 
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP

# --- Force GTK/Gnome Settings (Apply Rosepine-Dark) ---
exec-once = gsettings set org.gnome.desktop.interface gtk-theme "Rosepine-Dark"
exec-once = gsettings set org.gnome.desktop.interface icon-theme "Tela-dracula"
exec-once = gsettings set org.gnome.desktop.interface cursor-theme "Bibata-Original-Ice"
exec-once = gsettings set org.gnome.desktop.interface color-scheme "prefer-dark"

# 2. Portal Nuke & Restart (PASTE THIS HERE)
# Kill any rogue portals from GNOME or previous sessions
exec-once = killall xdg-desktop-portal-hyprland
#exec-once = killall xdg-desktop-portal-gnome
exec-once = killall xdg-desktop-portal-kde
exec-once = killall xdg-desktop-portal-gtk
exec-once = killall xdg-desktop-portal

# 3. Start the correct portals
# Start the backends first
exec-once = /usr/lib/xdg-desktop-portal-hyprland &
exec-once = /usr/lib/xdg-desktop-portal-gtk &
exec-once = /usr/lib/xdg-desktop-portal-gnome &

# 4. Start the main portal service last
exec-once = sleep 2 && /usr/lib/xdg-desktop-portal &


# --- Notification Daemon ---
exec-once = dunst

# --- Wallpaper Setup ---
# Start the swww wallpaper daemon 
exec-once = swww-daemon &
# Set your wallpaper
exec-once = swww img ~/Pictures/Wallpaper/kjj.png

# --- Night light Daemon ---
exec-once = wl-gammarelay-rs

# --- Status Bar ---
# To start your status bar
#See wiki.hypr.land/Useful-Utilities/Status-Bars/#simple-status-bars
#See https://github.com/Alexays/Waybar/wiki/Module:-Hyprland

exec-once = waybar

# --- Clipboard Manager ---
# Clipboard Manager (cliphist)
#See https://github.com/sentriz/cliphist
#See https://wiki.hypr.land/Useful-Utilities/Clipboard-Managers/
exec-once = wl-paste --type text --watch cliphist store
exec-once = wl-paste --type image --watch cliphist store

# --- Dock ---
# Clean auto-hiding dock
exec-once = nwg-dock-hyprland -p bottom -i 44 -w 5 -mb 5 -l overlay -c "rofi -show drun -show-icons" -d -hd 1000 -lp start

# --- polkit-kde-agent ---
exec-once = /usr/lib/polkit-kde-authentication-agent-1

# --- (Alt+Tab GUI with Rofi) --- (UNDER-DEVELOPMENT)
#bind = ALT , TAB ,exec, ~/.config/hypr/scripts/rofi-wapperWS.sh
# --- hyprshell (Alt+Tab rust GUI) ---
#exec-once = hyprshell run & 

# --- (Snappy Switcher) ---
#exec-once = snappy-wrapper
exec-once = snappy-switcher --daemon
bind = ALT, Tab, exec, snappy-switcher next
bind = ALT SHIFT, Tab, exec, snappy-switcher prev


#*==================================================================*#
#                           CUSTOM SOUND                             #
#*==================================================================*#

#For windows like USB In/Out sound
exec-once = ~/.config/hypr/scripts/usb-sound.sh
#Using ALSA for Startup sound
exec-once = aplay -q ~/.local/share/sounds/Startup.wav
#exec-once = amixer sset Master 100% unmute && aplay -q ~/.local/share/sounds/Startup.wav


#*================================================================*#
#                           VARIABLES                              #
#*================================================================*#

# ~/.config/hypr/hyprland.conf

# ... (monitors, autostart, etc.) ...
#More of sway

# Define your variables FIRST
$terminal = kitty
$fileManager = nautilus
$menu = fuzzel --drun # <-- Note the correct flag is --drun, not -d

# Set the Super key (Windows key) as the main modifier
$mainMod = SUPER

# --- Screenshot Variables ---
# Creates a variable for the path to your screenshot folder
$screenshot_dir = $HOME/Pictures/Hyprland Screenshots
# Sound file to play (found!)
$screenshot_sound = /usr/share/sounds/freedesktop/stereo/camera-shutter.oga



#*================================================================*#
#                           INPUT                                  #
#*================================================================*#

# See https://wiki.hyprland.org/Configuring/Variables/#input
input {
    kb_layout = us
    follow_mouse = 1 # Focus follows the mouse cursor

    touchpad {
        natural_scroll = no
    }
}


#*================================================================*#
#                           GENERAL SETTINGS                       #
#*================================================================*#

# See https://wiki.hyprland.org/Configuring/Variables/#general
general {
    gaps_in = 3
    gaps_out = 4
    border_size = 2

    # Border colors
    col.active_border = rgba(33ccffee) rgba(00ff99ee) 45deg
    col.inactive_border = rgba(595959aa)

    # Use the dwindle layout
    layout = dwindle

    
}


#*================================================================*#
#                           DECORATION                             #
#*================================================================*#

# See https://wiki.hyprland.org/Configuring/Variables/#decoration
decoration {
    rounding = 11
    active_opacity   = 1
    inactive_opacity = 0.8
    
    blur {
        enabled = true
        size = 5
        passes = 2
        new_optimizations = on
        ignore_opacity = true
        xray = false
    }
    #not in my luxury
    shadow {
        enabled = false
    }
}

#*================================================================*#
#                           ANIMATIONS                             #
#*================================================================*#

# See https://wiki.hyprland.org/Configuring/Animations/
animations {
    enabled = yes
    bezier = myBezier, 0.05, 0.9, 0.1, 1.05
    animation = windows, 1, 7, myBezier
    animation = windowsOut, 1, 7, default, popin 80%
    
    # CHANGED ONLY THIS: Speed 10 -> 1 (Instant color switch)
    animation = border, 1, 8, default
    
    animation = fade, 1, 7, default
    animation = workspaces, 1, 6, default
}

#*================================================================*#
#                           LAYOUTS                                #
#*================================================================*#

# --- Dwindle Layout Settings ---
# See https://wiki.hyprland.org/Configuring/Dwindle-Layout/
dwindle {
    pseudotile = yes # master switch for pseudotiling
    preserve_split = yes # you probably want this
}


#*================================================================*#
#                           MISC SETTINGS                          #
#*================================================================*#

# Add this to ~/.config/hypr/hyprland.conf
misc {
    force_default_wallpaper = 0
}

#*================================================================*#
#                           WINDOW RULES (v0.53)                   #
#*================================================================*#

# --- Btop Floating  ---
# Rule for floating btop (Calling a Script Cuz why not)

windowrule = match:class ^(btop-floating)$, float on
windowrule = match:class ^(btop-floating)$, size 1220 600
windowrule = match:class ^(btop-floating)$, center on

# --- Waypaper ---
windowrule = match:class ^(waypaper)$, float on
windowrule = match:class ^(waypaper)$, size 800 550
windowrule = match:class ^(waypaper)$, center on

# --- Alacritty ---
windowrule = match:class ^(Alacritty)$, float on
windowrule = match:class ^(Alacritty)$, size 900 550
windowrule = match:class ^(Alacritty)$, center on

# --- Proton VPN ---
windowrule = match:class ^(protonvpn-app)$, float on
windowrule = match:class ^(protonvpn-app)$, size 100 500
windowrule = match:class ^(protonvpn-app)$, center on

# --- Gnome Apps ---
windowrule = match:class ^(org.gnome.Calculator)$, float on
windowrule = match:class ^(org.gnome.Calculator)$, size 100 200
windowrule = match:class ^(org.gnome.Calculator)$, center on

windowrule = match:class ^(org.gnome.Calendar)$, float on
windowrule = match:class ^(org.gnome.Calendar)$, size 880 580
windowrule = match:class ^(org.gnome.Calendar)$, center on

windowrule = match:class ^(org.gnome.Nautilus)$, float on
windowrule = match:class ^(org.gnome.Nautilus)$, size 900 550
windowrule = match:class ^(org.gnome.Nautilus)$, center on

# --- Tools & VM ---
windowrule = match:class ^(blueberry.py)$, float on
windowrule = match:class ^(blueberry.py)$, size 500 500
windowrule = match:class ^(blueberry.py)$, center on

windowrule = match:class ^(virt-manager)$, float on
windowrule = match:class ^(virt-manager)$, size 900 500
windowrule = match:class ^(virt-manager)$, center on

# --- Portal Fixes ---
windowrule = match:class ^(xdg-desktop-portal-gtk)$, float on
windowrule = match:class ^(xdg-desktop-portal-gtk)$, size 900 600
windowrule = match:class ^(xdg-desktop-portal-gtk)$, center on


#*================================================================*#
#                           BORDER COLORS                          #
#*================================================================*#

# Syntax Reference: 
# windowrule = border_color [ACTIVE_COLOR] [INACTIVE_COLOR], match:class ^(classname)$
# Note: For gradients, the syntax is: color1 color2 ... angle color1 color2 ... angle

# --- Alacritty ---
# Active: Bright Orange | Inactive: Burnt/Off-Orange
windowrule = border_color rgba(ff9900ff) rgb(995c00), match:class ^Alacritty$

# --- Kitty ---
# Active: Light Pink/Purple | Inactive: Teal/Blue-ish
windowrule = border_color rgb(F7AFFF) rgb(8FBCBB), match:class ^kitty$

# --- Ghostty ---
# Active: Cyan | Inactive: Blue
windowrule = border_color rgb(0DB9D7) rgb(7aa2f7), match:class ^com\.mitchellh\.ghostty$

# --- Brave Browser ---
# Active: Purple | Inactive: Dim Light Pink
windowrule = border_color rgb(9d7cd8) rgb(eab8d1), match:class ^brave-browser$

# --- Firefox ---
# Gradient Active: Lavender Pop (45deg) | Gradient Inactive: Deep Royal Purple (45deg)
windowrule = border_color rgba(4c1d95ff) rgba(a78bfaff) rgba(f472b6ff) rgba(a78bfaff) 45deg rgba(4c1d95ff) rgba(a78bfaff) rgba(f472b6ff) rgba(a78bfaff) 45deg, match:class ^(firefox)$

# --- Btop (Floating) ---
# Gradient Active: Purple/Pink/Red (180deg) | Gradient Inactive: Darker Purple/Red (180deg)
windowrule = border_color rgba(7c3aedff) rgba(cba6f7ff) rgba(b4befeff) rgba(d20f39ff) 180deg rgba(9333eaff) rgba(cba6f7ff) rgba(b4befeff) rgba(c01c28ff) 180deg, match:class ^btop-floating$


#*================================================================*#
#                           KEYBINDINGS                            #
#*================================================================*#

# See https://wiki.hyprland.org/Configuring/Binds/
# NOW you can use the variables you defined above

# --- System Reloads ---
bindd = SUPER_CTRL, R, Reloads Hyprland,exec, hyprctl reload && notify-send -t 2000 "(>///<) Hyprland Reloaded"

# --- Lockscreen ---
bindd = Super, L, Lock Screen, exec, swaylock --color 282a36 --screenshots --effect-blur 21x11 --clock --indicator --indicator-radius 150 --indicator-thickness 9 --ring-color bd93f9 --key-hl-color e06c75

# --- Screenshot Keybindings (with Sound and Notifications) ---
# Full screen screenshot (saves to a file)
#bindd = , Print, Full Screenshot Save,exec, grim "$screenshot_dir/$(date +'%Y-%m-%d_%H-%M-%S').png" && paplay $screenshot_sound && notify-send -t 2000 "Screenshot Saved" "Full screen image saved to Hyprland Screenshots."
bindd = , Print, Screenshot/Record Menu,exec, ~/.config/hypr/scripts/sidebar-screenshot.sh

# Screenshot of the full screen (copies to clipboard)
bindd = $mainMod, Print, Full Screenshot Copy, exec, grim - | wl-copy && paplay $screenshot_sound && notify-send -t 2000 "Screenshot Copied" "Full screen image copied to clipboard."
# Screenshot of a selected area (saves to a file)
bindd = SHIFT, Print, Area Screenshot Save,exec, grim -g "$(slurp)" "$screenshot_dir/$(date +'%Y-%m-%d_%H-%M-%S').png" && paplay $screenshot_sound && notify-send -t 2000 "Screenshot Saved" "Selected area saved to Hyprland Screenshots."
# Screenshot of a selected area (copies to clipboard)
bindd = CTRL, Print, Area Screenshot Copy,exec, grim -g "$(slurp)" - | wl-copy && paplay $screenshot_sound && notify-send -t 2000 "Screenshot Copied" "Selected area copied to clipboard."
# Screenshot for laptop copy 
bindd = $mainMod, f1,Universal key for Quick Full Screenshot Copy, exec, grim - | wl-copy && paplay $screenshot_sound && notify-send -t 2000 "Screenshot Copied" "Full screen image copied to clipboard."
bindd = $mainMod CTRL, f1,Universal key for Quick Screenshot Area Copy,exec, grim -g "$(slurp)" - | wl-copy && paplay $screenshot_sound && notify-send -t 2000 "Screenshot Copied" "Selected area copied to clipboard."
bindd = $mainMod SHIFT, f1, Universal key Area Screenshot Save,exec, grim -g "$(slurp)" "$screenshot_dir/$(date +'%Y-%m-%d_%H-%M-%S').png" && paplay $screenshot_sound && notify-send -t 2000 "Screenshot Saved" "Selected area saved to Hyprland Screenshots."
bindd = $mainMod ALT,f1, Fullscreen Screenshot Save, exec, grim "$screenshot_dir/$(date +'%Y-%m-%d_%H-%M-%S').png" && paplay $screenshot_sound && notify-send -t 2000 "Screenshot Saved" "Fullscreen saved to Hyprland Screenshots."
# --- Wallpaper Management ---
# Change wallpaper on the fly
bindd = SUPER, W, Change Wallpaper, exec, ~/.config/hypr/scripts/wallpaper.sh
# --- mpvpaper (Live Wallpaper) ---
bindd = SUPER CTRL, W, Toggle Live Wallpaper, exec, ~/.config/hypr/scripts/livewallpaper.sh #Live wallpaper
# Live Wallpaper Switcher (sww livewallpaper) {Broken}
#bind = SUPER CTRL, W, exec, ~/.config/hypr/scripts/swww_smart.sh

# --- Window Manipulation ---
#----Toggle floating----
bindd = SUPER ALT, SPACE, Toggle Floating, togglefloating

# --- Mouse Buttons ---
# Move windows with SUPER + Left Mouse button
binddm = SUPER, mouse:272, Move Active Window[Left Mouse button],movewindow
# Resize windows with SUPER + Right Mouse button
binddm = SUPER, mouse:273, Resizes Active Window[Right Mouse button],resizewindow
#I have extra mouse buttons that I dont use So yk!!
binddm = ,mouse:276, Move Active Window with (Mouse Side button) , movewindow#(extra)
binddm = , mouse:275,Resize Active Window with (Mouse Side button) , resizewindow#(side ~ extra)
# Toggle Smart Float with a middle mouse CLICK
bindd = , mouse:274, Smart Float with Mouse (Press Scroll button) ,exec, ~/.config/hypr/scripts/smart_float.sh

# Resize windows (with custom made script works!! btw but weirdly)
# Adjust the path to where you saved the script
# binde = SUPER CTRL, left,  exec, ~/.config/hypr/scripts/smart_resize.sh l 20
# binde = SUPER CTRL, right, exec, ~/.config/hypr/scripts/smart_resize.sh r 20
# binde = SUPER CTRL, up,    exec, ~/.config/hypr/scripts/smart_resize.sh u 20
# binde = SUPER CTRL, down,  exec, ~/.config/hypr/scripts/smart_resize.sh d 20
# dont ask why i thought this was a good idea 

# ----------------------------------------------------- 
# Native Smooth Resizing (No Scripts)
# ----------------------------------------------------- 

# 'binde' = repeat. Hold the key to resize smoothly.
# extra [d] flag is for description 
# Resize Step = 20 pixels (adjust as needed)

# width:  Add (+) to grow, Subtract (-) to shrink
bindde = SUPER CTRL, right,Resizes Outwards [Right] ,resizeactive, 20 0
bindde = SUPER CTRL, left,Resizes Inwards [Left] ,resizeactive, -20 0

# height: Add (+) to grow, Subtract (-) to shrink
bindde = SUPER CTRL, up,Resizes Upwards [Up],resizeactive, 0 -20
bindde = SUPER CTRL, down,Resizes Downwards [down],resizeactive, 0 20



# --- Script Variable ---
$ctl_script = $HOME/.config/hypr/scripts/brigthervolume.sh
$vol_script = ~/.config/hypr/scripts/fast_vol.sh

# --- Volume Control (3% Step via Script) ---
bindde = , XF86AudioRaiseVolume, Volume Up, exec, $ctl_script up
bindde = , XF86AudioLowerVolume, Volume Down, exec, $ctl_script down
bindd  = , XF86AudioMute, Toggle Mute, exec, $ctl_script mute

# --- Brightness Control (Laptop Keys) ---
bindde = , XF86MonBrightnessUp, Brightness Up, exec, $ctl_script brightness_up
bindde = , XF86MonBrightnessDown, Brightness Down, exec, $ctl_script brightness_down

# --- Brightness Control (External Keyboard CTRL+F1/F2) ---
bindde = CTRL, F2, Brightness Up, exec, $ctl_script brightness_up
bindde = CTRL, F1, Brightness Down, exec, $ctl_script brightness_down

# --- Application Launch Keybinds ---
bindd = CTRL ALT, K, Launch Terminal(kitty), exec, $terminal  #kitty
bindd = $mainMod, E, Launch File Manager, exec, $fileManager  #nautilus
bindd = $mainMod, R, Launch App Menu (fuzzel), exec, fuzzel 
bindd = CTRL ALT, B, Launch Brave, exec, brave 
bindd = CTRL ALT, F, Launch Firefox, exec, firefox
bindd = CTRL ALT, A, Launch alacritty, exec, alacritty 
#bindd = CTRL ALT, G, Launch Ghostty,exec, ghostty
bindd = CTRL ALT, G, Launch Ghostty,exec, env MESA_GL_VERSION_OVERRIDE=4.6 MESA_GLSL_VERSION_OVERRIDE=460 ghostty
# --- Gnome Calculator ---
bindd = , XF86Calculator, Calculator, exec, gnome-calculator
# --- Window Management Keybinds ---
bindd = $mainMod, Q, Close Active Window, killactive,
bindd = $mainMod, M, Exit Hyprland Session, exit,
bindd = $mainMod, V, Toggle Smart Float, exec, ~/.config/hypr/scripts/smart_float.sh # Toggle floating for a window
# --- Window Shuffler ----
bindd = $mainMod, J, Shuffle Vertical, exec, ~/.config/hypr/scripts/smart_split.sh j
bindd = $mainMod, K, Shuffle Horizontal, exec, ~/.config/hypr/scripts/smart_split.sh k
# --- Window Navigation ---
#bindd = ALT, Tab, Cycle Next Window, cyclenext,
#bindd = ALT SHIFT, Tab, Cycle Previous Window, cyclenext, prev

# --- Move focus with Super + Arrow Keys ---
bindd = $mainMod, left, Focus Left, movefocus, l
bindd = $mainMod, right, Focus Right, movefocus, r
bindd = $mainMod, up, Focus Up, movefocus, u
bindd = $mainMod, down, Focus Down, movefocus, d

# --- Workspace Navigation ---
bindd = CTRL ALT, right, Workspace Next, workspace, e+1 # Move to the next workspace 
bindd = CTRL ALT, left, Workspace Previous, workspace, e-1 # Move to the previous workspace

# --- Switch workspaces with Super + [0-9] ---
bindd = $mainMod, 1, Go to Workspace 1, workspace, 1
bindd = $mainMod, 2, Go to Workspace 2, workspace, 2
bindd = $mainMod, 3, Go to Workspace 3, workspace, 3
bindd = $mainMod, 4, Go to Workspace 4, workspace, 4
bindd = $mainMod, 5, Go to Workspace 5, workspace, 5
bindd = $mainMod, 6, Go to Workspace 6, workspace, 6
bindd = $mainMod, 7, Go to Workspace 7, workspace, 7
bindd = $mainMod, 8, Go to Workspace 8, workspace, 8
bindd = $mainMod, 9, Go to Workspace 9, workspace, 9
bindd = $mainMod, 0, Go to Workspace 10, workspace, 10

# --- Move active window to a workspace with Super + SHIFT + [0-9] ---
bindd = $mainMod SHIFT, 1, Move to Workspace 1, movetoworkspace, 1
bindd = $mainMod SHIFT, 2, Move to Workspace 2, movetoworkspace, 2
bindd = $mainMod SHIFT, 3, Move to Workspace 3, movetoworkspace, 3
bindd = $mainMod SHIFT, 4, Move to Workspace 4, movetoworkspace, 4
bindd = $mainMod SHIFT, 5, Move to Workspace 5, movetoworkspace, 5
bindd = $mainMod SHIFT, 6, Move to Workspace 6, movetoworkspace, 6
bindd = $mainMod SHIFT, 7, Move to Workspace 7, movetoworkspace, 7
bindd = $mainMod SHIFT, 8, Move to Workspace 8, movetoworkspace, 8
bindd = $mainMod SHIFT, 9, Move to Workspace 9, movetoworkspace, 9
bindd = $mainMod SHIFT, 0, Move to Workspace 10, movetoworkspace, 10

# --- Utility Keybinds ---
# Keybind for Color Picker
bindd = SUPER SHIFT, C, Color Picker, exec, ~/.config/hypr/scripts/picker.sh
# Keybind for Clipboard History (using the new script)
## --- With Fuzzel ---
#bindd = SUPER SHIFT, V, Clipboard History, exec, ~/.config/hypr/scripts/cliphist-fuzzel-img.sh
## --- With Rofi ---
bindd = SUPER SHIFT, V, Clipboard History, exec, ~/.config/hypr/scripts/cliphist-rofi.py
# --- Power menu ---
bindd = $mainMod ALT, S, Power Menu, exec, ~/.config/hypr/scripts/powermenu.sh

# --- Night Light Controls ---
# Toggle night light on/off
bindd = SUPER, N, Toggle Night Light, exec, ~/.config/hypr/scripts/nightlight_control.sh
# Increase temperature (make it cooler/whiter/bluish)
bindde = SUPER ALT, 2, Night Light (Cooler), exec, ~/.config/hypr/scripts/nightlight_control.sh increase
# Decrease temperature (make it warmer/darker/redder)
bindde = SUPER ALT, 1, Night Light (Warmer), exec, ~/.config/hypr/scripts/nightlight_control.sh decrease

# --- Waypaper ---
bindd = SUPER ALT, W, Launch Waypaper(Wallpaper Manager), exec, waypaper

# --- Keybinding Cheatsheet ---
bindd = SUPER, Escape, Show Keybinds, exec, ~/.config/hypr/scripts/show_cheatsheet.sh

# --- Headphones media control ---
# Headphone media keys - bind both to playerctl
bind = , XF86AudioPlay, exec, playerctl play-pause
bind = , XF86AudioPause, exec, playerctl play-pause
