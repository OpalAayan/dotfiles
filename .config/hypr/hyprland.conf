######################################################################################
# AUTOGENERATED HYPR CONFIG.
# PLEASE DBUS-UPDATE-ACTIVATION-ENVIRONMENT --SYSTEMD WAYLAND_DISPLAY XDG_CURRENT_DESKTOP #
#######################################################################################


#*================================================================*#
#                           SYSTEM RELOAD                          #
#*================================================================*#

# Reloads the hyprland config
bind = SUPER_CTRL, R, exec, hyprctl reload && notify-send "(>///<) Hyprland Reloaded"


#*================================================================*#
#                           ENVIRONMENT                            #
#*================================================================*#

# --- Cursor Configuration ---
# env = HYPRCURSOR_THEME,Bibata-Original-Ice
# env = HYPRCURSOR_SIZE,24 this two doesnt work as i boot
exec-once = hyprctl setcursor Bibata-Original-Ice 24

# --- Environment Variables ---
env = XCURSOR_SIZE,24
env = QT_QPA_PLATFORMTHEME,qt5ct # For theming Qt applications


#*================================================================*#
#                           MONITORS                               #
#*================================================================*#

# See https://wiki.hyprland.org/Configuring/Monitors/
monitor=,preferred,auto,1


#*================================================================*#
#                           AUTOSTART                              #
#*================================================================*#

# See https://wiki.hyprland.org/Configuring/Keywords/

# --- System Services ---
# Start necessary services
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP

# --- Notification Daemon ---
exec-once = dunst
# Instantly close the most recent notification with the Escape key
#bind = , Escape, exec, dunstctl close i am not be able to use esc key any whereelse

# --- Wallpaper Setup ---
# Start the swww wallpaper daemon 
exec-once = swww-daemon &
# Set your wallpaper (This will now work because the daemon is running)
exec-once = swww img ~/Pictures/Wallpaper/kaiju.png

# --- Status Bar ---
# To start your status bar
exec-once = waybar

# --- Portal Services ---
# Stop the GNOME portal and start the Hyprland one
exec-once = systemctl --user stop xdg-desktop-portal-gnome
exec-once = systemctl --user start xdg-desktop-portal-hyprland

# --- Clipboard Manager ---
# Clipboard Manager (cliphist)
exec-once = wl-paste --type text --watch cliphist store
exec-once = wl-paste --type image --watch cliphist store

# --- Dock ---
# Clean auto-hiding dock
exec-once = nwg-dock-hyprland -p bottom -i 44 -w 5 -mb 5 -l overlay -c "fuzzel" -d -hd 1000 -lp start

# --- polkit-kde-agent ---
exec-once = /usr/lib/polkit-kde-authentication-agent-1

# --- hyprshell (Alt+Tab rust GUI) ---
exec-once = hyprshell run &


#*================================================================*#
#                           VARIABLES                              #
#*================================================================*#

# ~/.config/hypr/hyprland.conf

# ... (monitors, autostart, etc.) ...
#More of sway

# Define your variables FIRST
$terminal = kitty
$fileManager = nautilus
$menu = fuzzel --drun # <-- Note the correct flag is --drun, not -d

# Set the Super key (Windows key) as the main modifier
$mainMod = SUPER

# --- Screenshot Variables ---
# Creates a variable for the path to your screenshot folder
$screenshot_dir = $HOME/Pictures/Hyprland Screenshots
# Sound file to play (found!)
$screenshot_sound = /usr/share/sounds/freedesktop/stereo/camera-shutter.oga

# --- Notification Script Path ---
# # # Path to notification script
$notify_script = ~/.config/hypr/scripts/notify-send.sh


#*================================================================*#
#                           INPUT                                  #
#*================================================================*#

# See https://wiki.hyprland.org/Configuring/Variables/#input
input {
    kb_layout = us
    follow_mouse = 1 # Focus follows the mouse cursor

    touchpad {
        natural_scroll = no
    }
}


#*================================================================*#
#                           GENERAL SETTINGS                       #
#*================================================================*#

# See https://wiki.hyprland.org/Configuring/Variables/#general
general {
    gaps_in = 3
    gaps_out = 4
    border_size = 2

    # Border colors
    col.active_border = rgba(33ccffee) rgba(00ff99ee) 45deg
    col.inactive_border = rgba(595959aa)

    # Use the dwindle layout
    layout = dwindle

    
}


#*================================================================*#
#                           DECORATION                             #
#*================================================================*#

# See https://wiki.hyprland.org/Configuring/Variables/#decoration
decoration {
    rounding = 11
    active_opacity   = 1
    inactive_opacity = 0.8
    
    # Background blur 3 1
    blur {
        enabled = true
        size = 5
        passes = 2
        new_optimizations = on
        ignore_opacity = true
        xray = false
        
    }

    # Window shadows
    #drop_shadow = yes error = <decoration:drop_shadow> does not exist
    #shadow_range = 4
    #shadow_render_power = 3
    #col.shadow = rgba(1a1a1aee)
    #same none of this exits 
}


#*================================================================*#
#                           ANIMATIONS                             #
#*================================================================*#

# See https://wiki.hyprland.org/Configuring/Animations/
animations {
    enabled = yes
    bezier = myBezier, 0.05, 0.9, 0.1, 1.05
    animation = windows, 1, 7, myBezier
    animation = windowsOut, 1, 7, default, popin 80%
    animation = border, 1, 10, default
    animation = fade, 1, 7, default
    animation = workspaces, 1, 6, default
}


#*================================================================*#
#                           LAYOUTS                                #
#*================================================================*#

# --- Dwindle Layout Settings ---
# See https://wiki.hyprland.org/Configuring/Dwindle-Layout/
dwindle {
    pseudotile = yes # master switch for pseudotiling
    preserve_split = yes # you probably want this
}


#*================================================================*#
#                           MISC SETTINGS                          #
#*================================================================*#

# Add this to ~/.config/hypr/hyprland.conf
misc {
    force_default_wallpaper = 0
}


#*================================================================*#
#                           WINDOW RULES                           #
#*================================================================*#

# See https://wiki.hyprland.org/Configuring/Window-Rules/

# Make GTK applications look better
#windowrulev2 = nomaximizerequest, class:.* says invaild rule2 found: nomaximizerequest

# Example of floating a specific window
# windowrulev2 = float, class:^(pavucontrol)$
#--All windowrules

# --- Floating Window Rules ---
# Rule for floating btop (using window class for reliability)
windowrulev2 = float, class:^(btop-floating)$
windowrulev2 = center, class:^(btop-floating)$
# Rule for floating waypaper
windowrulev2 = float, class:^(waypaper)$
windowrulev2 = center, class:^(waypaper)$
windowrulev2 = size 800 550, class:^(waypaper)$
# --- Floating Alacritty ---
windowrulev2 = float, class:^(Alacritty)$
windowrulev2 = center, class:^(Alacritty)$
windowrulev2 = size 900 510, class:^(Alacritty)$
# --- Floating Brave ---
windowrulev2 = size 900 510, class:^(brave-browser)$, floating:1
windowrulev2 = center, class:^(brave-browser)$, floating:1



### --- Border colors --- 
# --- Custom Border for Alacritty ---
windowrulev2 = bordercolor rgba(ff9900ff) rgba(ff5500ff), class:^(Alacritty)$

#windowrulev2 = bordercolor rgba(f38ba8ff) rgba(b4befeef) rgba(cba6f7ff) rgba(6c4faaff), class:^(btop-floating)$
windowrulev2 = bordercolor rgba(f38ba8ff) rgba(b4befeef) rgba(cba6f7ff) rgba(A772E2FF), class:^(btop-floating)$
windowrulev2 = bordercolor rgba(9d7cd8ff) rgba(bb9af7ff) rgba(c0caf5ff) rgba(bb9af7ff) rgba(9d7cd8ff), class:^(brave-browser)$
windowrulev2 = bordercolor rgb(F7AFFF) rgb(8FBCBB), class:^(kitty)$








#*================================================================*#
#                           KEYBINDINGS                            #
#*================================================================*#

# See https://wiki.hyprland.org/Configuring/Binds/
# NOW you can use the variables you defined above

# --- Lockscreen ---
bind = Super, L, exec, swaylock --color 282a36 --screenshots --effect-blur 21x11 --clock --indicator --indicator-radius 100 --indicator-thickness 7 --ring-color bd93f9 --key-hl-color e06c75

# --- Screenshot Keybindings (with Sound and Notifications) ---
# Full screen screenshot (saves to a file)
bind = , Print, exec, grim "$screenshot_dir/$(date +'%Y-%m-%d_%H-%M-%S').png" && paplay $screenshot_sound && notify-send "Screenshot Saved" "Full screen image saved to Hyprland Screenshots."

# Screenshot of a selected area (saves to a file)
bind = SHIFT, Print, exec, grim -g "$(slurp)" "$screenshot_dir/$(date +'%Y-%m-%d_%H-%M-%S').png" && paplay $screenshot_sound && notify-send "Screenshot Saved" "Selected area saved to Hyprland Screenshots."

# Screenshot of a selected area (copies to clipboard)
bind = CTRL, Print, exec, grim -g "$(slurp)" - | wl-copy && paplay $screenshot_sound && notify-send "Screenshot Copied" "Selected area copied to clipboard."

# --- Wallpaper Management ---
# Change wallpaper on the fly
bind = SUPER, W, exec, ~/.config/hypr/scripts/wallpaper.sh

# --- Window Manipulation ---
#----Toggle floating----
bind = SUPER ALT, SPACE, togglefloating

# Move windows with SUPER + Left Mouse button
bindm = SUPER, mouse:272, movewindow
# Resize windows with SUPER + Right Mouse button
bindm = SUPER, mouse:273, resizewindow

# # # --- Volume Control (with hold-to-repeat) ---
#  binde = , XF86AudioRaiseVolume, exec, pamixer --allow-boost -i 5 && $notify_script "audio-volume-high" "Volume" "$(pamixer --get-volume)"
#  binde = , XF86AudioLowerVolume, exec, pamixer -d 5 && $notify_script "audio-volume-low" "Volume" "$(pamixer --get-volume)"
binde = , XF86AudioRaiseVolume, exec, bash -c 'pamixer --allow-boost -i 3 && paplay /usr/share/sounds/freedesktop/stereo/audio-volume-change.oga && $notify_script "audio-volume-high" "Volume" "$(pamixer --get-volume)"'
binde = , XF86AudioLowerVolume, exec, bash -c 'pamixer -d 3 && paplay /usr/share/sounds/freedesktop/stereo/audio-volume-change.oga && $notify_script "audio-volume-low" "Volume" "$(pamixer --get-volume)"'

# # # --- Mute Control (single press) ---
bind = , XF86AudioMute, exec, pamixer -t && (pamixer --get-mute | grep -q true && dunstify -i "audio-volume-muted" "Mute" "Muted" -u low -r 9992 || dunstify -i "audio-volume-high" "Mute" "Unmuted" -u low -r 9992)

# # # --- Brightness Control (with hold-to-repeat) ---
binde = CTRL, F2, exec, sudo brightnessctl set 5%+ && $notify_script "display-brightness" "Brightness" "$(brightnessctl -m | awk -F, '{print substr($4, 0, length($4)-1)}')"
binde = CTRL, F1, exec, sudo brightnessctl set 5%- && $notify_script "display-brightness" "Brightness" "$(brightnessctl -m | awk -F, '{print substr($4, 0, length($4)-1)}')"

# --- Application Launch Keybinds ---
bind = CTRL ALT, K, exec, $terminal  # Launch kitty
bind = $mainMod, Q, exec, $terminal     # Super + Q Kitty
bind = $mainMod, E, exec, $fileManager  # Super + E -> Launch (nautilus)
bind = Super, R, exec, fuzzel # Super + R (fuzzel) //$menu
bind = CTRL ALT, B, exec, brave # for Brave 
bind = CTRL ALT, F, exec, firefox # for firefox
bind = CTRL ALT, A, exec, alacritty # 2nd terminal

# --- Window Management Keybinds ---
bind = $mainMod, C, killactive,# Close active window
bind = $mainMod, M, exit,# Exit Hyprland session
bind = $mainMod, V, exec, ~/.config/hypr/scripts/smart_float.sh # Toggle floating for a window
bind = $mainMod, J, togglesplit,# Toggle split direction (vertical/horizontal)

# --- Window Navigation ---
bind = ALT, Tab, cyclenext, #cycle through windows
#bind = ALT SHIFT, Tab, cyclenext, prev   # Alt+Shift+Tab to cycle windows backward (Tbh no need of this)

# --- Move focus with Super + Arrow Keys ---
bind = $mainMod, left, movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up, movefocus, u
bind = $mainMod, down, movefocus, d

# --- Workspace Navigation ---
bind = CTRL ALT, right, workspace, e+1 # Move to the next workspace 
bind = CTRL ALT, left, workspace, e-1 # Move to the previous workspace

# --- Switch workspaces with Super + [0-9] ---
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

# --- Move active window to a workspace with Super + SHIFT + [0-9] ---
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

# --- Move/resize windows with Super + mouse buttons ---
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# --- Utility Keybinds ---
# Keybind for Color Picker
bind = SUPER SHIFT, C, exec, hyprpicker | wl-copy

# Keybind for Clipboard History with fuzzel
bind = SUPER SHIFT, V, exec, cliphist list | fuzzel --dmenu | cliphist decode | wl-copy

# --- Power menu ---
bind = $mainMod ALT, S, exec, ~/.config/hypr/scripts/powermenu.sh

# --- Night Light Controls ---
# Toggle night light on/off
bind = SUPER, N, exec, ~/.config/hypr/scripts/toggle_nightlight.sh
# Increase temperature (make it cooler/whiter)
binde = SUPER ALT, 2, exec, ~/.config/hypr/scripts/toggle_nightlight.sh increase
# Decrease temperature (make it warmer/redder)
binde = SUPER ALT, 1, exec, ~/.config/hypr/scripts/toggle_nightlight.sh decrease

# --- Waypaper ---
bind = SUPER ALT, W,exec, waypaper

# --- Keybinding Cheatsheet ---
# Keybinding Cheatsheet (Add this anywhere in your keybinds section)
bind = SUPER, Escape, exec, ~/.config/hypr/scripts/show_cheatsheet.sh